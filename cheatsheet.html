<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>NGS 2016 Workshop Cheatsheet</title>
<link rel="stylesheet" href="./css/crg.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>NGS 2016 Workshop Cheatsheet</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_basic_linux_commands">1. Basic Linux Commands</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_browse_the_directory_structure">1.1. Browse the directory structure</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>pwd</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tell you where you are</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>ls</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list the content of the current directory</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>ls &lt;directory&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list the content of a directory</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>cd &lt;directory&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">go to the specified directory</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>cd ~ (or cd)</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">go to your home directory</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>cd  ..</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">go to the parent directory</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>tree &lt;directory&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list the content of a directory in a tree-like format</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>mkdir &lt;directory&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create the specified directory</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_view_the_content_of_a_file">1.2. View the content of a file</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>less, more</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view text with paging</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>head</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print first lines of a file</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>tail</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print last lines of a file</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>cat</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print the content of a file to the screen</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>zcat</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print the content of a <code>gzip</code> compressed file to the screen</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_file_manipulations">1.3. File manipulations</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>rm &lt;file&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove <code>file</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>cp &lt;file1&gt; &lt;file2&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">copy <code>file1</code> to <code>file2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>mv &lt;file1&gt; &lt;file2&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rename <code>file1</code> to <code>file2</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_some_other_useful_commands">1.4. Some other useful commands</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>find &lt;folder&gt;/ -type f</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">recursively find all files in a specific folder</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>find . -name '&lt;pattern&gt;'</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">recursively find anything whose name contains &lt;pattern&gt; in the current folder
													     (<span class="red">Single quotes must be used in order to avoid wildcard expansion by the shell</span>)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>grep &lt;pattern&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">show lines of text containing a given pattern</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>grep -v &lt;pattern&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">show lines of text not containing a given pattern</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>sort</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort lines of text files</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>wc</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count words, lines and characters</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>&gt; (output redirection)</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allow to redirect the output to a file</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>| (pipe)</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allow to send the output from one program to another</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>cut</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">extract selected portion of each line from one or more files</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>echo</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">input a line of text and display it on standard output</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_awk_programming">1.5. AWK programming</h3>
<div class="paragraph">
<p><strong>AWK</strong> - UNIX shell programming language. A fast and stable tool for processing
text files.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>awk '/www/ { print $0 }' &lt;file&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">search for the pattern <code>www</code> in each line of the file</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>awk '$3=="www"' &lt;file&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">search for the exact match of <code>www</code> in the third column of the file</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>awk 'length($0) &gt; 80' &lt;file&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print every line in the file that is longer than 80 characters</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>awk 'NR % 2 == 0' &lt;file&gt;</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print even-numbered lines of the file</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_some_built_in_variables">1.5.1. Some built-in variables</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>NR</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of records</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>NF</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of fields</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>FS</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field separator character</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="literal"><pre>OFS</pre></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output field separator character</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="http://www.grymoire.com/Unix/Awk.html" class="bare" target="_blank">www.grymoire.com/Unix/Awk.html</a> and <a href="http://www.tutorialspoint.com/awk/awk_basic_examples.htm" class="bare" target="_blank">www.tutorialspoint.com/awk/awk_basic_examples.htm</a> for more information
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_and_editing_files">2. Writing and editing files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several ways to write and edit files.
The most commonly used text editors are <code>vi</code>, <code>emacs</code> and <code>gedit</code>.</p>
</div>
<div class="sect2">
<h3 id="_gedit">2.1. Gedit</h3>
<div class="paragraph">
<p>Gedit is a text editor with graphical user interface. To create a new file in the current folder just call <code>gedit</code> with the name of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">gedit file.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you are done, save the file (by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>S</kbd></span> or by selecting <span class="menuseq"><span class="menu">File</span>&#160;&#9656; <span class="menuitem">Save</span></span>) and close Gedit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vi">2.2. Vi</h3>
<div class="paragraph">
<p>Vi is a text editor with a command mode interface. See <a href="http://www.howtogeek.com/102468/a-beginners-guide-to-editing-text-files-with-vi" target="_blank">this article</a> for a beginner&#8217;s guide.</p>
</div>
<div class="paragraph">
<p>To create a new file in the current folder just call <code>vi</code> with the name of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vi file.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vi has several modes which are specified in the bottom part of screen.
When you just open the editor you cannot write on the file, because it is the command mode.
To start writing, press <kbd>i</kbd>, and you will notice that the status in the bottom of the screen changed to <code>INSERT</code>.
Now you can paste the text by right-click with the mouse and paste, or by pressing <span class="keyseq"><kbd>SHIFT</kbd>+<kbd>Insert</kbd></span>.
To go back to command mode press <kbd>ESC</kbd>.
To save, make sure you are in command mode and type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-vim" data-lang="vim">:wq</code></pre>
</div>
</div>
<div class="paragraph">
<p>To undo, press <kbd>u</kbd> when you are in command mode.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_cluster_usage">3. Basic cluster usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_connect_to_the_cluster">3.1. Connect to the cluster</h3>
<div class="paragraph">
<p>In order to connect to the cluster type the following command, replacing <code>ngsXX</code> with your username:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">ssh -Y ngsXX@ngs-login.linux.crg.es</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-Y</code> option allows graphical output (<strong>X11</strong> forwarding).</p>
</div>
</div>
<div class="sect2">
<h3 id="_basic_commands">3.2. Basic commands</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>qsub -q &lt;queue&gt; &lt;script&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">submit a batch job to a specific queue</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>qstat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">monitor the status of submitted jobs</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>qstat -j &lt;job_id&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">display detailed information of a specific
                                            job</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>qdel &lt;job_id&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete a submitted job</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>job_id</code> is an important number that identifies your job in the cluster. It&#8217;s
necessary for managing and controlling the job.</p>
</div>
<div class="paragraph">
<p>A simple example of job submission and deletion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">$ qsub -q course sleeper.sh</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Your job 393672 ("sleeper.sh") has been submitted</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">$ qstat</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>job-ID     prior   name       user      state submit/start at   queue         jclass      slots ja-task-ID
----------------------------------------------------------------------------------------------------------
  393672   0.00000 sleeper.sh ngsXX  qw    11/09/2015 11:18:01                               1</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cmd" data-lang="cmd">$ qdel 393672</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>ngsXX has deleted job 393672</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="http://www.linux.crg.es" class="bare" target="_blank">www.linux.crg.es</a> for the complete <strong>CRG</strong> cluster documentation
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</body>
</html>